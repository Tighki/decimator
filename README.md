# Decimator - Система управления документами

## Обзор проекта
Decimator - это полнофункциональная система управления документами, предоставляющая возможности организации, хранения и управления доступом к документам. Система построена на микросервисной архитектуре с использованием FastAPI для бэкенда и React для фронтенда.

## Архитектура проекта

Проект разделен на следующие основные компоненты:

### Бэкенд (API)
- RESTful API на FastAPI
- MongoDB в качестве основной базы данных
- Асинхронное взаимодействие с БД через Motor
- JWT аутентификация
- Модульная структура с разделением на контроллеры, сервисы, модели и базу данных

### Фронтенд
- Интерфейс на React 17 с TypeScript
- Material-UI для компонентов
- Роутинг с разделением на публичные и защищенные маршруты
- Типизация для всех компонентов и функций

## Структура данных

Система оперирует следующими основными сущностями:
- Пользователи (Users)
- Организации (Organizations)
- Папки (Folders)
- Группы папок (Folder Groups)
- Документы (Documents)

## API Endpoints

### Аутентификация
- `POST /api/auth/login` - Аутентификация пользователя
- `POST /api/auth/refresh` - Обновление токена доступа

### Пользователи
- `GET /api/users` - Получение списка пользователей
- `GET /api/users/{user_id}` - Получение информации о пользователе
- `POST /api/users` - Создание нового пользователя
- `PUT /api/users/{user_id}` - Обновление информации пользователя
- `DELETE /api/users/{user_id}` - Удаление пользователя

### Организации
- `GET /api/orgs` - Получение списка организаций
- `GET /api/orgs/{org_id}` - Получение информации об организации
- `POST /api/orgs` - Создание новой организации
- `PUT /api/orgs/{org_id}` - Обновление информации организации
- `DELETE /api/orgs/{org_id}` - Удаление организации

### Папки
- `GET /api/folders` - Получение списка папок
- `GET /api/folders/{folder_id}` - Получение информации о папке
- `POST /api/folders` - Создание новой папки
- `PUT /api/folders/{folder_id}` - Обновление информации папки
- `DELETE /api/folders/{folder_id}` - Удаление папки

### Документы
- `GET /api/documents` - Получение списка документов
- `GET /api/documents/{document_id}` - Получение информации о документе
- `POST /api/documents` - Создание нового документа
- `PUT /api/documents/{document_id}` - Обновление информации документа
- `DELETE /api/documents/{document_id}` - Удаление документа

## Технологии

### Бэкенд
- FastAPI: Современный веб-фреймворк для построения API
- MongoDB: NoSQL база данных для хранения данных
- Motor: Асинхронный драйвер для MongoDB
- Pydantic: Валидация данных и сериализация/десериализация
- JWT: Аутентификация и авторизация
- Uvicorn: ASGI сервер

### Фронтенд
- React 17: JavaScript-библиотека для создания пользовательских интерфейсов
- TypeScript: Статическая типизация для JavaScript
- Material-UI: Компоненты пользовательского интерфейса
- React Router: Маршрутизация внутри приложения
- React Toast Notifications: Система уведомлений

## Инструкция по установке

### Требования
- Python 3.8+
- Node.js 14+
- MongoDB 4.4+
- Docker и Docker Compose (опционально)

### Установка и запуск без Docker

#### Бэкенд
1. Перейдите в директорию API:
   ```
   cd services/decimator_api
   ```

2. Создайте виртуальное окружение и установите зависимости:
   ```
   python -m venv .venv
   .venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. Запустите API:
   ```
   uvicorn app.main:app --reload --port 8000
   ```
   или используйте batch-скрипт:
   ```
   start_backend.bat
   ```

#### Фронтенд
1. Перейдите в директорию фронтенда:
   ```
   cd services/frontend
   ```

2. Установите зависимости:
   ```
   npm install
   ```
   или
   ```
   yarn install
   ```

3. Запустите фронтенд:
   ```
   npm start
   ```
   или
   ```
   yarn start
   ```
   или используйте batch-скрипт:
   ```
   start_frontend.bat
   ```

### Запуск с использованием Docker
1. В корневой директории проекта выполните:
   ```
   docker-compose up -d
   ```

## Конфигурация
Основные параметры конфигурации можно настроить через файлы `.env`:
- `.env` - Основные параметры для проекта
- `services/decimator_api/.env.dev` - Настройки бэкенда для разработки
- `services/decimator_api/.env.common` - Общие настройки бэкенда
- `services/frontend/.env` - Настройки фронтенда

## Доступ к API документации
После запуска API, документация Swagger доступна по адресу:
```
http://localhost:8000/docs
```

## Доступ к приложению
После запуска фронтенда, приложение доступно по адресу:
```
http://localhost:3000
``` 